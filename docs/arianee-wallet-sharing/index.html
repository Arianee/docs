<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Arianee Wallet Sharing · Arianee Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="***Still in BETA***"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Arianee Wallet Sharing · Arianee Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.arianee.org/"/><meta property="og:description" content="***Still in BETA***"/><meta property="og:image" content="https://docs.arianee.org/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.arianee.org/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-112469684-3', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/favicon.png" alt="Arianee Docs"/><h2 class="headerTitleWithLogo">Arianee Docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://arianee.org" target="_self">Arianee Home</a></li><li class=""><a href="https://github.com/arianee" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Standards</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Overview</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/arianee-project">Arianee Project</a></li><li class="navListItem"><a class="navItem" href="/docs/arianee-economy">Arianee Economy</a></li><li class="navListItem"><a class="navItem" href="/docs/arianee-decentralized">Arianee Decentralized Platform</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/how-to-proceed">How to proceed</a></li><li class="navListItem"><a class="navItem" href="/docs/kyb-process">KYB Process</a></li><li class="navListItem"><a class="navItem" href="/docs/staking-policy">Staking policy</a></li><li class="navListItem"><a class="navItem" href="/docs/livedemo">Live Demo</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">SDK</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/arianee-js">ArianeeJS library</a></li><li class="navListItem"><a class="navItem" href="/docs/arianee-js-wallet">Wallet</a></li><li class="navListItem"><a class="navItem" href="/docs/arianee-js-economy">Economy</a></li><li class="navListItem"><a class="navItem" href="/docs/arianee-js-certificate">Certificate</a></li><li class="navListItem"><a class="navItem" href="/docs/arianee-js-identity">Identity</a></li><li class="navListItem"><a class="navItem" href="/docs/arianee-js-messaging">Messaging</a></li><li class="navListItem"><a class="navItem" href="/docs/arianee-js-event">ArianeeEvent</a></li><li class="navListItem"><a class="navItem" href="/docs/events-listener">Events Listener</a></li><li class="navListItem"><a class="navItem" href="/docs/arianee-privacy-gateway">Arianee Privacy Gateway</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Standards</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/standard-introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/arianee-links">Arianee Links</a></li><li class="navListItem"><a class="navItem" href="/docs/ArianeeProductCertificate-i18n">ArianeeProductCertificate-i18n</a></li><li class="navListItem"><a class="navItem" href="/docs/ArianeeBrandIdentity-i18n">ArianeeBrandIdentity-i18n</a></li><li class="navListItem"><a class="navItem" href="/docs/ArianeeEvent-i18n">ArianeeEvent-i18n</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/arianee-wallet-sharing">Arianee Wallet Sharing (BETA)</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Smart Contracts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/testnet">Arianee Testnet</a></li><li class="navListItem"><a class="navItem" href="/docs/mainnet">Arianee Mainnet</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/Arianee/docs/tree/master/docs/arianee-wallet-sharing.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Arianee Wallet Sharing</h1></header><article><div><span><p><strong><em>Still in BETA</em></strong></p>
<p>To increase user adoption, and smoother user experience, Arianee designed a standard to share a user wallet between multiple mobile applications.</p>
<p>The idea is to let a brand (or a wallet provider) designed an app, and, on first launch, detect if other Arianee compatible wallet apps are installed on the device, and if yes, to let import the main wallet and avoid creating multiple wallets for the same user.</p>
<h2><a class="anchor" aria-hidden="true" id="workflow"></a><a href="#workflow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Workflow</h2>
<p>You need a user, and 2 Arianee compatible wallet app.
One (App#1) that will import the wallet from the other app
One (App#2) with an already initiliazed wallet</p>
<ul>
<li>User launch App#1</li>
<li>App#1 detects if App#2 is installed,</li>
<li>User choose to import his/her wallet from App#2</li>
<li>App#1 redirect User to App#2 (with a one-time-publickey for privacy reason)</li>
<li>App#2 receives a deeplink with App#1 scheme and one-time-publickey</li>
<li>App#2 checks if scheme exists in the list of validated Arianee Identity</li>
<li>App#2 ask for a confirmation from User</li>
<li>App#2 encrypt wallet with public key, and redirect user to App#1</li>
<li>App#1 receives a deeplink with encrypted wallet</li>
<li>App#1 decrypt wallet</li>
<li>Done !</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="detailed-workflow"></a><a href="#detailed-workflow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Detailed workflow</h2>
<p>An <a href="https://github.com/Arianee/apkss-example/" target="_blank" rel="nofollow noreferrer noopener">exemple ionic app</a> is available and open source.</p>
<p>This app implements the whole Arianee Wallet Sharing process.</p>
<h2><a class="anchor" aria-hidden="true" id="define-scheme-in-arianee-identity"></a><a href="#define-scheme-in-arianee-identity" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Define scheme in Arianee Identity</h2>
<p>Each brand/company on Arianee is uniquely identified using Arianee Identity smart contract, and ensure that these entities passed the Arianee KYB process.</p>
<p>In their identity, they can put their &quot;mobile app scheme&quot;. It's a unique identifier defined when an app is on an app store (both google &amp; apple).
So, all identities with a scheme mean that there's an &quot;official&quot; wallet app related to the brand.</p>
<p>With that in mind, it's easy for a wallet app developer to detect if a user got an Arianee Compatible wallet app.</p>
<p>Two keys in identity json content define mobile app scheme :</p>
<ul>
<li>iosScheme for iOS</li>
<li>androidScheme for Android</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="detect-compatible-wallet-app"></a><a href="#detect-compatible-wallet-app" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Detect compatible wallet app</h2>
<p><strong><em>Your app need to check if a compatible app is installed on the user device and eventually propose to import a wallet from a compatible app to the user</em></strong></p>
<ol>
<li>App retrieves compatible wallet apps list</li>
</ol>
<blockquote>
<p>You can have the whole list in a centralized way :
<a href="https://api.arianee.org/report/apkss/identities" target="_blank" rel="nofollow noreferrer noopener">https://api.arianee.org/report/apkss/identities</a></p>
</blockquote>
<pre><code class="hljs">[{
<span class="hljs-symbol">    name:</span> <span class="hljs-string">"Arianee"</span>,
<span class="hljs-symbol">    iosScheme:</span> <span class="hljs-string">"com.arianee.wallet"</span>,
<span class="hljs-symbol">    androidScheme:</span> <span class="hljs-string">"com.arianee.wallet"</span>,
<span class="hljs-symbol">    address:</span> <span class="hljs-string">"0xb908B66915ecD1ec31e669adc9C71BDcE44EC601"</span>,
<span class="hljs-symbol">    identityId:</span> <span class="hljs-string">"0xb908B6"</span>,
<span class="hljs-symbol">    appName:</span> <span class="hljs-string">"Arianee Wallet"</span>
}]
</code></pre>
<ol start="2">
<li>Detect installed apps</li>
</ol>
<blockquote>
<p><a href="https://www.npmjs.com/package/cordova-plugin-appavailability" target="_blank" rel="nofollow noreferrer noopener">cordova-plugin-appavailability</a> is a cordova plugin to check if an app is installed on the same device</p>
</blockquote>
<ol start="3">
<li><p>User choose app to import the wallet from</p></li>
<li><p>App doublechecks scheme of selected app in Arianee identity</p></li>
</ol>
<blockquote>
<p>Check <a href="/docs/arianee-js-identity#read-identity-using-shortcode">read-identity-using-shortcode</a></p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="forge-and-arianee-sharing-wallet-request"></a><a href="#forge-and-arianee-sharing-wallet-request" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Forge and Arianee Sharing Wallet request</h2>
<p><strong><em>Your app need to prepare a link that will open the chosen wallet app including all mandatory information.</em></strong></p>
<ol>
<li>Create a key pair to encrypt/decrypt wallet between apps. (see <a href="#encrypt">encrypt</a> for more infos)</li>
</ol>
<pre><code class="hljs">    encryptAlgorithm = {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'RSA-OAEP'</span>,
        <span class="hljs-attr">modulusLength</span>: <span class="hljs-number">4096</span>,
        <span class="hljs-attr">publicExponent</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>([<span class="hljs-number">0x01</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>]),
        <span class="hljs-attr">hash</span>: <span class="hljs-string">'sha-512'</span>
    };
    <span class="hljs-keyword">const</span> keyUsages = [<span class="hljs-string">'encrypt'</span>, <span class="hljs-string">'decrypt'</span>];
    <span class="hljs-keyword">const</span> keys = <span class="hljs-keyword">await</span> crypto.subtle.generateKey(<span class="hljs-keyword">this</span>.encryptAlgorithm, <span class="hljs-literal">true</span>, keyUsages);
    <span class="hljs-keyword">const</span> privateKey = <span class="hljs-keyword">await</span> crypto.subtle.exportKey(<span class="hljs-string">'jwk'</span>, keys.privateKey);
    <span class="hljs-keyword">const</span> publicKey = <span class="hljs-keyword">await</span> crypto.subtle.exportKey(<span class="hljs-string">'jwk'</span>, keys.publicKey);
</code></pre>
<blockquote>
<p>Arianee ecosystem handle only this algorithm for now</p>
</blockquote>
<ol start="2">
<li><p>Store the public/private key, somewhere self (check secure storage)</p></li>
<li><p>Redirect user using this deeplink :</p></li>
</ol>
<p>The deeplink is forged that way :</p>
<pre><code class="hljs"><span class="hljs-keyword">let</span> deeplink = scheme + <span class="hljs-string">'://apkssRequest?requestId=0x135935&amp;publicKey='</span> + <span class="hljs-built_in">JSON</span>.stringify(publicKey)
</code></pre>
<blockquote>
<ul>
<li>Scheme : Scheme of the app, can be found in the identity previously requested</li>
<li>Route : apkssRequest</li>
<li>QueryParams:</li>
<li>requestId: The identity ID of your identity</li>
<li>publicKey : The public key formated in JWK (see <a href="#encrypt">encrypt</a>)</li>
</ul>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="receiving-a-arianee-wallet-sharing-request"></a><a href="#receiving-a-arianee-wallet-sharing-request" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Receiving a Arianee Wallet Sharing request</h2>
<p><strong><em>Your app need to handle Arianee Wallet Sharing request deeplink and reply with an Arianee Wallet Sharing response deeplink</em></strong></p>
<ol>
<li><p>App need to handle <strong><em>apkssRequest</em></strong> route.</p></li>
<li><p>App checks if <strong><em>requestingId</em></strong> QueryParam match the identity schema using getIdentity</p></li>
</ol>
<blockquote>
<p>Check <a href="/docs/arianee-js-identity#read-identity-using-shortcode">read-identity-using-shortcode</a></p>
</blockquote>
<ol start="3">
<li><p>App <em>need</em> to ask user's permission to share his/her wallet to requesting app</p></li>
<li><p>Encrypt the mnemonic with requester public key</p></li>
</ol>
<pre><code class="hljs"><span class="hljs-keyword">const</span> algorithm = {
        name:<span class="hljs-string">"RSA-OAEP"</span>,
        hash: <span class="hljs-string">"SHA-512"</span>
      };

<span class="hljs-keyword">const</span> publicKey = <span class="hljs-keyword">await</span> crypto.subtle.importKey(
    <span class="hljs-string">'jwk'</span>,
    jwk,
    algorithm,
    <span class="hljs-literal">true</span>,
    jwk.key_ops
);
<span class="hljs-keyword">const</span> enc = <span class="hljs-keyword">new</span> TextEncoder()
<span class="hljs-keyword">const</span> encryptedMnemonics = <span class="hljs-keyword">await</span> crypto.subtle.encrypt(algorithm, publicKey, enc.encode(mnemonic));
</code></pre>
<ol start="5">
<li>App forge Arianee wallet sharing response deeplink with encrypted mnemonic</li>
</ol>
<pre><code class="hljs"><span class="hljs-keyword">const</span> encryptedMnemonicsBuffer = <span class="hljs-keyword">new</span> Buffer(encryptedMnemonics)
<span class="hljs-keyword">let</span> deeplink = Schema+<span class="hljs-string">'://apkssResponse?encryptedMnemonics='</span>+<span class="hljs-built_in">JSON</span>.stringify(objectLink.encryptedMnemonics)
</code></pre>
<blockquote>
<ul>
<li>Scheme : Scheme of the requesting app, can be found with getIdentity from the requestId</li>
<li>Route : apkssResponse</li>
<li>QueryParams: encryptedMnemonics : the encrypted mnemonics in buffer</li>
</ul>
</blockquote>
<ol start="5">
<li>App redirect user using deeplink</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="receiving-an-arianee-wallet-sharing-response"></a><a href="#receiving-an-arianee-wallet-sharing-response" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Receiving an Arianee Wallet Sharing response</h2>
<p><strong><em>Your app need to handle Arianee Wallet Sharing response deeplink and eventually replaces existing wallet</em></strong></p>
<ol>
<li><p>App need to handle <strong><em>apkssResponse</em></strong> route.</p></li>
<li><p>App <em>need</em> to ask user's permission to import this wallet</p></li>
<li><p>App decrypts <strong><em>encryptedMnemonics</em></strong> Query Param using previously created keypair</p></li>
</ol>
<pre><code class="hljs">    <span class="hljs-keyword">const</span> privateKeyCrypt = <span class="hljs-keyword">await</span> crypto.subtle.importKey(<span class="hljs-string">'jwk'</span>, privateKey, <span class="hljs-keyword">this</span>.encryptAlgorithm, <span class="hljs-literal">true</span>, [<span class="hljs-string">'decrypt'</span>]);

    <span class="hljs-keyword">const</span> encryptedMnemonicArray = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(encryptedMnemonics.length);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; encryptedMnemonics.length; i++) {
      encryptedMnemonicArray[i] = encryptedMnemonics[i];
    }

    <span class="hljs-keyword">const</span> decrypt = <span class="hljs-keyword">await</span> crypto.subtle.decrypt(<span class="hljs-keyword">this</span>.encryptAlgorithm, privateKeyCrypt, encryptedMnemonicArray);
    <span class="hljs-keyword">const</span> mnemonic = <span class="hljs-keyword">new</span> TextDecoder().decode(decrypt);
</code></pre>
<ol start="4">
<li>App replaces existing wallet</li>
</ol>
<pre><code class="hljs">wallet.from<span class="hljs-constructor">Mnemonic(<span class="hljs-params">mnemonic</span>)</span>;
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="encrypt-a-id-encrypt-a"></a><a href="#encrypt-a-id-encrypt-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Encrypt <a id="encrypt"></a></h2>
<p>To ensure compatibility between all the Arianee application we need to use the sames encryption system.</p>
<p>The encryption system required at this time is :</p>
<ul>
<li>Algorithm: RSA-OAEP</li>
<li>Hash: sha-512</li>
<li>Key length: 4096</li>
</ul>
<p>This requirement is compatible with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API" target="_blank" rel="nofollow noreferrer noopener">Web Crupto API</a></p>
<p>The compatible algorithm will evolve over the time. You must integrate them to ensure compatibility with other app.</p>
<p>To communicate correctly the public key please use a JSON Web Key as defined in <a href="https://tools.ietf.org/html/rfc7517" target="_blank" rel="nofollow noreferrer noopener">RFC7517</a></p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 4/22/2020</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/ArianeeMessage-i18n"><span class="arrow-prev">← </span><span>Previous</span></a><a class="docs-next button" href="/docs/testnet"><span>Arianee Testnet</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#workflow">Workflow</a></li><li><a href="#detailed-workflow">Detailed workflow</a></li><li><a href="#define-scheme-in-arianee-identity">Define scheme in Arianee Identity</a></li><li><a href="#detect-compatible-wallet-app">Detect compatible wallet app</a></li><li><a href="#forge-and-arianee-sharing-wallet-request">Forge and Arianee Sharing Wallet request</a></li><li><a href="#receiving-a-arianee-wallet-sharing-request">Receiving a Arianee Wallet Sharing request</a></li><li><a href="#receiving-an-arianee-wallet-sharing-response">Receiving an Arianee Wallet Sharing response</a></li><li><a href="#encrypt-a-id-encrypt-a">Encrypt &lt;a id=&quot;encrypt&quot;&gt;&lt;/a&gt;</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"></a><div><h5>Docs</h5><a href="/docs/intro">Overview</a><a href="/docs/howToProceed">Getting started</a><a href="/docs/ArianeeJS">ArianeeJS SDK Reference</a></div><div><h5>Community</h5><a href="https://t.me/arianeeproject" target="_blank">Telegram</a><div class="social"><a href="https://twitter.com/ArianeeProject" class="twitter-follow-button">Follow @ArianeeProject</a></div></div><div><h5>More</h5><a href="https://github.com/Arianee">GitHub</a></div></section><section class="copyright">Copyright © 2020 .Arianee Project <br/>Association subject to the Law of 1 July 1901 and the Decree of 16 August 1901 <br/> Siret Number 852 836 105 00019 – APE 9499Z</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'e73e0f88578cab4470c13f065abb38bb',
                indexName: 'arianee',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>